{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"@babel/runtime/helpers/objectWithoutProperties\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/objectSpread\"","webpack:///external \"react\""],"names":["root","factory","exports","module","define","amd","a","i","window","modules","installedModules","__webpack_require__","moduleId","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","setSpace","str","SPACE","setHash","HASH","Routers","props","_React$useReducer","React","useReducer","reducer","state","history","stateMap","_React$useReducer2","_slicedToArray2","default","dispatch","isHistoryBindDispatch","push","useCallback","_react","createElement","RouteContext","Provider","_extends2","Route","style","rest","_objectWithoutProperties2","_React$useState","useState","_React$useState2","isRenderChildren","setIsRenderChildren","isDisplay","useContext","isPathAtTop","path","useEffect","isPathInStateMap","delayRemove","setTimeout","useMemo","Container","setContainer","fn","_defineProperty2","_objectSpread3","createContext","isHaveWindow","baseState","undefined","lastPath","params","needRemvoe","animate","isDoingGoback","action","setDefaultPath","uri","focus","location","pathname","canGoback","checkPath","topPath","indexOf","paths","split","length","k","list","goback","needRemove","arguments","gobackPath","nextState","getNextState","dState","dStateMap","lastState","console","error","/","data","pushState","document","title","log","_ref","display","pointEvents","Error","concat","search","dataList","_ele$split","_ele$split2","v","require"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 1);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setSpace = setSpace;\nexports.setHash = setHash;\nexports.Routers = Routers;\nexports.Route = Route;\nexports.setContainer = setContainer;\nexports.history = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ 2));\n\nvar _extends2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/extends */ 3));\n\nvar _slicedToArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ 4));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ 5));\n\nvar _objectSpread3 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/objectSpread */ 6));\n\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ 7));\n\n// 库名\nvar packageName = 'memo-router';\n\nvar RouteContext = _react.default.createContext();\n\nvar isHaveWindow = typeof window !== 'undefined'; // 基础state结构\n\nvar baseState = {\n  path: undefined,\n  lastPath: undefined,\n  params: {},\n  needRemvoe: false,\n  animate: true,\n  isDoingGoback: false\n}; // 多组件同渲染时的连接符\n\nvar SPACE = '&&';\n\nfunction setSpace(str) {\n  SPACE = str;\n} // hash定位符，默认为空\n\n\nvar HASH = '';\n\nfunction setHash(str) {\n  HASH = str;\n} // 导航器是否已经绑定dispatch\n\n\nvar isHistoryBindDispatch = false; // 导航器\n\nvar history = {\n  useContext: function useContext() {\n    return _react.default.useContext(RouteContext);\n  },\n  // 前往一个路径，如果曾经去过，则跳转到去过的路径\n  push: function push(action) {\n    reducer(history, action);\n  },\n  setDefaultPath: function setDefaultPath(uri, focus) {\n    if (isHaveWindow && (focus || window.location.pathname === '/')) {\n      history.push(uri);\n    }\n  },\n  canGoback: function canGoback(path) {\n    path = path || history.state.lastPath;\n\n    if (!path) {\n      return false;\n    }\n\n    return history.stateMap[path];\n  },\n  isPathAtTop: function isPathAtTop(path, checkPath) {\n    var topPath = checkPath || history.state.path;\n\n    if (!topPath) {\n      return false;\n    }\n\n    if (topPath.indexOf(SPACE) > -1) {\n      var paths = topPath.split(SPACE);\n\n      for (var i = 0; i < paths.length; i++) {\n        if (path === paths[i]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    return topPath === path;\n  },\n  isPathInStateMap: function isPathInStateMap(path) {\n    for (var k in history.stateMap) {\n      var list = k.split(SPACE);\n\n      for (var i = 0; i < list.length; i++) {\n        if (path === list[i]) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  goback: function goback(path) {\n    var needRemove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var gobackPath = path || history.state.lastPath;\n    var isCanGoback = history.canGoback(gobackPath);\n\n    if (isCanGoback) {\n      // 计算goback, 如果goback指定路径，会清理中间的历史\n      var getNextState = function getNextState(dState, dStateMap) {\n        if (dState.needRemvoe && dStateMap[dState.path]) {\n          delete dStateMap[dState.path];\n        }\n\n        if (!dState.lastPath) {\n          nextState = dState;\n          return;\n        }\n\n        var lastState = dStateMap[dState.lastPath];\n\n        if (lastState && lastState.path !== gobackPath) {\n          getNextState(lastState, dStateMap);\n        }\n\n        nextState = lastState;\n      };\n\n      history.state.needRemvoe = needRemove;\n      var nextState = (0, _objectSpread3.default)({}, history.state);\n      getNextState(nextState, history.stateMap);\n      nextState.isDoingGoback = true;\n      history.push(nextState);\n    } else {\n      console.error(\"[Error-Route] is can't goback\");\n    }\n  },\n  state: (0, _objectSpread3.default)({}, baseState, {\n    path: '/'\n  }),\n  stateMap: {\n    '/': (0, _objectSpread3.default)({}, baseState, {\n      path: '/'\n    })\n  }\n}; // 当push执行时的减速器\n\nexports.history = history;\n\nfunction reducer(data, action) {\n  if (typeof action === 'string') {\n    action = (0, _objectSpread3.default)({}, baseState, {\n      path: action\n    });\n  } else {\n    action = (0, _objectSpread3.default)({}, baseState, action);\n  }\n\n  if (action.path) {\n    if (!action.isDoingGoback) {\n      action.lastPath = history.state.path;\n    }\n\n    var state = (0, _objectSpread3.default)({}, action);\n    var stateMap = (0, _objectSpread3.default)({}, history.stateMap, (0, _defineProperty2.default)({}, action.path, state));\n    data = {\n      stateMap: stateMap,\n      state: state\n    };\n  }\n\n  history.state = (0, _objectSpread3.default)({}, data.state);\n  history.stateMap = (0, _objectSpread3.default)({}, data.stateMap);\n\n  if (isHaveWindow) {\n    window.history.pushState({}, document.title, HASH + data.state.path);\n  }\n\n  console.log(data);\n  return data;\n}\n\nfunction Routers(props) {\n  var _React$useReducer = _react.default.useReducer(reducer, {\n    state: history.state,\n    stateMap: history.stateMap\n  }),\n      _React$useReducer2 = (0, _slicedToArray2.default)(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  if (!isHistoryBindDispatch) {\n    isHistoryBindDispatch = true;\n    history.push = dispatch;\n  }\n\n  return _react.default.useCallback(_react.default.createElement(RouteContext.Provider, (0, _extends2.default)({}, props, {\n    value: state\n  })), [state]);\n}\n\nfunction Route(props) {\n  var style = props.style,\n      rest = (0, _objectWithoutProperties2.default)(props, [\"style\"]);\n\n  var _React$useState = _react.default.useState(0),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      isRenderChildren = _React$useState2[0],\n      setIsRenderChildren = _React$useState2[1];\n\n  var context = _react.default.useContext(RouteContext);\n\n  var isDisplay = history.isPathAtTop(props.path);\n\n  _react.default.useEffect(function () {\n    if (isDisplay && !isRenderChildren) {\n      setIsRenderChildren(isRenderChildren + 1);\n    } else if (!history.isPathInStateMap(props.path)) {\n      if (props.delayRemove) {\n        setTimeout(function () {\n          setIsRenderChildren(0);\n        }, props.delayRemove);\n      } else {\n        setIsRenderChildren(0);\n      }\n    }\n  }, [isDisplay]);\n\n  function render() {\n    if (!isRenderChildren) {\n      return null;\n    }\n\n    return _react.default.createElement(Container, (0, _extends2.default)({\n      isDisplay: isDisplay,\n      style: style\n    }, rest));\n  }\n\n  return _react.default.useMemo(render, [isRenderChildren, isDisplay]);\n} // 设置默认容器，以实现切换路由时的组件显示\n\n\nvar Container;\n\nif (isHaveWindow) {\n  Container = function Container(_ref) {\n    var path = _ref.path,\n        isDisplay = _ref.isDisplay,\n        style = _ref.style,\n        rest = (0, _objectWithoutProperties2.default)(_ref, [\"path\", \"isDisplay\", \"style\"]);\n    return _react.default.createElement(\"div\", (0, _extends2.default)({\n      style: (0, _objectSpread3.default)({\n        display: isDisplay ? 'inline' : 'none',\n        pointEvents: isDisplay ? 'auto' : 'none'\n      }, style)\n    }, rest));\n  };\n} else {\n  // 如果在ReactNative等非浏览器的环境, 需要用户主动设定一个容器组件\n  Container = function Container() {\n    throw new Error(\"\\n      [\".concat(packageName, \"] If not in Browser, You need set default containner:\\n      setContainner(({isDisplay, ...rest})=>{\\n        return <YourComponent isShowComponent={isDisplay} {...rest} ...\\n      })\\n    \"));\n  };\n}\n\nfunction setContainer(fn) {\n  Container = fn;\n} // 根据路径初始化默认路由\n\n\nif (isHaveWindow && window.location.pathname !== '/') {\n  var search = window.location.search;\n  var pathname = window.location.pathname;\n  var params = {};\n\n  if (search.indexOf('?') === 0) {\n    // 解析params\n    var data = search.split('?')[1];\n    var dataList = data.split('&');\n\n    for (var i = 0; i < dataList.length; i++) {\n      var ele = dataList[i];\n\n      var _ele$split = ele.split('='),\n          _ele$split2 = (0, _slicedToArray2.default)(_ele$split, 2),\n          k = _ele$split2[0],\n          v = _ele$split2[1];\n\n      params[k] = v;\n    }\n  }\n\n  history.push({\n    path: pathname,\n    params: params\n  });\n}\n\n/***/ }),\n/* 1 */\n/*!***************************************************************!*\\\n  !*** external \"@babel/runtime/helpers/interopRequireDefault\" ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n/***/ }),\n/* 2 */\n/*!*****************************************************************!*\\\n  !*** external \"@babel/runtime/helpers/objectWithoutProperties\" ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\n/***/ }),\n/* 3 */\n/*!*************************************************!*\\\n  !*** external \"@babel/runtime/helpers/extends\" ***!\n  \\*************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/extends\");\n\n/***/ }),\n/* 4 */\n/*!*******************************************************!*\\\n  !*** external \"@babel/runtime/helpers/slicedToArray\" ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/slicedToArray\");\n\n/***/ }),\n/* 5 */\n/*!********************************************************!*\\\n  !*** external \"@babel/runtime/helpers/defineProperty\" ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/defineProperty\");\n\n/***/ }),\n/* 6 */\n/*!******************************************************!*\\\n  !*** external \"@babel/runtime/helpers/objectSpread\" ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/objectSpread\");\n\n/***/ }),\n/* 7 */\n/*!************************!*\\\n  !*** external \"react\" ***!\n  \\************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react\");\n\n/***/ })\n/******/ ]);\n});"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import React from 'react';\n\n// 库名\nconst packageName = 'memo-router';\nconst RouteContext = React.createContext();\nconst isHaveWindow = typeof window !== 'undefined';\n\n// 基础state结构\nconst baseState = {\n  path: undefined,\n  lastPath: undefined,\n  params: {},\n  needRemvoe: false,\n  animate: true,\n  isDoingGoback: false,\n};\n\n// 多组件同渲染时的连接符\nlet SPACE = '&&';\nexport function setSpace(str) {\n  SPACE = str;\n}\n\n// hash定位符，默认为空\nlet HASH = '';\nexport function setHash(str) {\n  HASH = str;\n}\n\n// 导航器是否已经绑定dispatch\nlet isHistoryBindDispatch = false;\n\n// 导航器\nexport const history = {\n  useContext: () => {\n    return React.useContext(RouteContext);\n  },\n  // 前往一个路径，如果曾经去过，则跳转到去过的路径\n  push: action => {\n    reducer(history, action);\n  },\n  setDefaultPath: (uri, focus) => {\n    if (isHaveWindow && (focus || window.location.pathname === '/')) {\n      history.push(uri);\n    }\n  },\n  canGoback: path => {\n    path = path || history.state.lastPath;\n    if (!path) {\n      return false;\n    }\n    return history.stateMap[path];\n  },\n  isPathAtTop: (path, checkPath) => {\n    const topPath = checkPath || history.state.path;\n    if (!topPath) {\n      return false;\n    }\n    if (topPath.indexOf(SPACE) > -1) {\n      const paths = topPath.split(SPACE);\n      for (let i = 0; i < paths.length; i++) {\n        if (path === paths[i]) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return topPath === path;\n  },\n  isPathInStateMap: path => {\n    for (const k in history.stateMap) {\n      const list = k.split(SPACE);\n      for (let i = 0; i < list.length; i++) {\n        if (path === list[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  goback: (path, needRemove = true) => {\n    const gobackPath = path || history.state.lastPath;\n    const isCanGoback = history.canGoback(gobackPath);\n    if (isCanGoback) {\n      history.state.needRemvoe = needRemove;\n      let nextState = { ...history.state };\n      // 计算goback, 如果goback指定路径，会清理中间的历史\n      function getNextState(dState, dStateMap) {\n        if (dState.needRemvoe && dStateMap[dState.path]) {\n          delete dStateMap[dState.path];\n        }\n        if (!dState.lastPath) {\n          nextState = dState;\n          return;\n        }\n        const lastState = dStateMap[dState.lastPath];\n        if (lastState && lastState.path !== gobackPath) {\n          getNextState(lastState, dStateMap);\n        }\n        nextState = lastState;\n      }\n      getNextState(nextState, history.stateMap);\n      nextState.isDoingGoback = true;\n      history.push(nextState);\n    } else {\n      console.error(\"[Error-Route] is can't goback\");\n    }\n  },\n  state: { ...baseState, path: '/' },\n  stateMap: { '/': { ...baseState, path: '/' } },\n};\n\n// 当push执行时的减速器\nfunction reducer(data, action) {\n  if (typeof action === 'string') {\n    action = { ...baseState, path: action };\n  } else {\n    action = { ...baseState, ...action };\n  }\n  if (action.path) {\n    if (!action.isDoingGoback) {\n      action.lastPath = history.state.path;\n    }\n    const state = { ...action };\n    const stateMap = { ...history.stateMap, [action.path]: state };\n    data = { stateMap, state };\n  }\n  history.state = { ...data.state };\n  history.stateMap = { ...data.stateMap };\n  if (isHaveWindow) {\n    window.history.pushState({}, document.title, HASH + data.state.path);\n  }\n  console.log(data);\n  return data;\n}\n\nexport function Routers(props) {\n  const [state, dispatch] = React.useReducer(reducer, {\n    state: history.state,\n    stateMap: history.stateMap,\n  });\n  if (!isHistoryBindDispatch) {\n    isHistoryBindDispatch = true;\n    history.push = dispatch;\n  }\n  return React.useCallback(<RouteContext.Provider {...props} value={state} />, [state]);\n}\n\nexport function Route(props) {\n  const { style, ...rest } = props;\n  const [isRenderChildren, setIsRenderChildren] = React.useState(0);\n  const context = React.useContext(RouteContext);\n  const isDisplay = history.isPathAtTop(props.path);\n  React.useEffect(\n    () => {\n      if (isDisplay && !isRenderChildren) {\n        setIsRenderChildren(isRenderChildren + 1);\n      } else if (!history.isPathInStateMap(props.path)) {\n        if (props.delayRemove) {\n          setTimeout(() => {\n            setIsRenderChildren(0);\n          }, props.delayRemove);\n        } else {\n          setIsRenderChildren(0);\n        }\n      }\n    },\n    [isDisplay]\n  );\n  function render() {\n    if (!isRenderChildren) {\n      return null;\n    }\n    return <Container isDisplay={isDisplay} style={style} {...rest} />;\n  }\n  return React.useMemo(render, [isRenderChildren, isDisplay]);\n}\n\n// 设置默认容器，以实现切换路由时的组件显示\nlet Container;\nif (isHaveWindow) {\n  Container = function({ path, isDisplay, style, ...rest }) {\n    return <div style={{\n      display: isDisplay ? 'inline' : 'none',\n      pointEvents: isDisplay ? 'auto' : 'none',\n      ...style,\n    }} {...rest} />;\n  };\n} else {\n  // 如果在ReactNative等非浏览器的环境, 需要用户主动设定一个容器组件\n  Container = function() {\n    throw new Error(`\n      [${packageName}] If not in Browser, You need set default containner:\n      setContainner(({isDisplay, ...rest})=>{\n        return <YourComponent isShowComponent={isDisplay} {...rest} ...\n      })\n    `);\n  };\n}\nexport function setContainer(fn) {\n  Container = fn;\n}\n\n// 根据路径初始化默认路由\nif (isHaveWindow && window.location.pathname !== '/') {\n  const search = window.location.search;\n  const pathname = window.location.pathname;\n  const params = {};\n  if (search.indexOf('?') === 0) {\n    // 解析params\n    const data = search.split('?')[1];\n    const dataList = data.split('&');\n    for (let i = 0; i < dataList.length; i++) {\n      const ele = dataList[i];\n      const [k, v] = ele.split('=');\n      params[k] = v;\n    }\n  }\n  history.push({ path: pathname, params });\n}\n","module.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/objectSpread\");","module.exports = require(\"react\");"],"sourceRoot":""}